<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serial Test - NIST Test Suite</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; background: linear-gradient(135deg, #9fef00 0%, #c5e063 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); padding: 40px; }
        h1 { color: #333; margin-bottom: 10px; font-size: 2.2em; border-bottom: 3px solid #9fef00; padding-bottom: 15px; }
        .test-category { display: inline-block; background: #9fef00; color: #333; padding: 6px 14px; border-radius: 20px; font-size: 0.85em; font-weight: 600; margin-bottom: 20px; }
        h2 { color: #333; margin-top: 30px; margin-bottom: 15px; font-size: 1.6em; border-left: 4px solid #9fef00; padding-left: 12px; }
        h3 { color: #555; margin-top: 20px; margin-bottom: 10px; font-size: 1.2em; }
        p { color: #666; line-height: 1.8; margin-bottom: 15px; font-size: 1.05em; }
        ul { margin-left: 25px; margin-bottom: 15px; color: #666; line-height: 1.8; }
        li { margin-bottom: 8px; }
        .highlight-box { background: #f8ffe8; border-left: 4px solid #9fef00; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .info-box { background: #e3f2fd; border-left: 4px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .warning-box { background: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .example { background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace; margin: 15px 0; overflow-x: auto; }
        .back-link { display: inline-block; margin-top: 30px; padding: 12px 24px; background: linear-gradient(135deg, #9fef00 0%, #c5e063 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: 600; transition: transform 0.2s, box-shadow 0.2s; }
        .back-link:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(159, 239, 0, 0.4); }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Courier New', monospace; color: #d63384; }
        .stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .stat-card { background: white; border: 2px solid #e0e0e0; border-radius: 8px; padding: 15px; text-align: center; }
        .stat-label { color: #888; font-size: 0.9em; margin-bottom: 8px; }
        .stat-value { color: #333; font-size: 1.4em; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <span class="test-category">NIST SP 800-22 Statistical Test</span>
        <h1>Serial Test</h1>

        <div class="highlight-box">
            <strong>Quick Summary:</strong> The Serial Test examines the frequency of all possible overlapping m-bit patterns. It checks whether each pattern appears with equal probability, which is expected in truly random sequences. This is a generalization of the Frequency Test.
        </div>

        <h2>What It Tests For</h2>
        <p>This test determines whether the number of occurrences of each m-bit pattern is approximately uniform. It checks for:</p>
        <ul>
            <li><strong>Pattern imbalance:</strong> Some m-bit sequences occurring more frequently than others</li>
            <li><strong>Local bias:</strong> Non-uniform distribution of short patterns</li>
            <li><strong>Sequence correlation:</strong> Dependencies between adjacent bits or patterns</li>
            <li><strong>Generator artifacts:</strong> Structural biases in how patterns are produced</li>
        </ul>

        <h2>How It Works</h2>
        <h3>Step 1: Choose Block Length m</h3>
        <p>Select an m-bit block size (typically m ranges from 2 to 16, depending on sequence length):</p>
        <div class="example">
For m=3: Tests all 8 possible 3-bit patterns (000,001,010,011,100,101,110,111)
For m=4: Tests all 16 possible 4-bit patterns
        </div>

        <h3>Step 2: Count Pattern Frequencies</h3>
        <p>Count overlapping occurrences of each possible m-bit pattern in the sequence:</p>
        <div class="example">
Sequence: 11010001...
m=2 patterns:
  11: appears at positions 0, ...
  10: appears at positions 1, ...
  01: appears at positions 2, ...
  00: appears at positions 3, 5, ...
        </div>

        <h3>Step 3: Calculate Two Test Statistics</h3>
        <p>Compute ψm² for both m-bit and (m-1)-bit patterns:</p>
        <div class="example">
ψm² = (2^m / n) × Sum(vi² for all patterns) - n

Where:
  n = sequence length
  vi = count of pattern i
  Sum over all 2^m possible patterns
        </div>

        <h3>Step 4: Compute Differences</h3>
        <p>Calculate two differential statistics:</p>
        <div class="example">
Δψm² = ψm² - ψm-1²
Δ²ψm² = ψm² - 2×ψm-1² + ψm-2²
        </div>

        <h3>Step 5: Convert to P-Values</h3>
        <p>Both Δψm² and Δ²ψm² are converted to p-values using the incomplete gamma function.</p>

        <div class="info-box">
            <strong>Understanding P-Values:</strong>
            <ul>
                <li><strong>p >= 0.01:</strong> PASS - Pattern distribution appears uniform</li>
                <li><strong>p < 0.01:</strong> FAIL - Significant pattern imbalance detected</li>
            </ul>
            <p>The test produces two p-values, both must pass.</p>
        </div>

        <h2>Interpreting Results</h2>

        <h3>Pass (p-values >= 0.01)</h3>
        <p>All m-bit patterns appear with approximately equal frequency, indicating:</p>
        <ul>
            <li>Uniform distribution of patterns</li>
            <li>No obvious bias in pattern generation</li>
            <li>Sequence appears random at the m-bit level</li>
        </ul>

        <h3>Fail (p-values < 0.01)</h3>
        <p>Pattern distribution is non-uniform. Common causes include:</p>
        <ul>
            <li><strong>Pattern bias:</strong> Generator favors certain bit combinations</li>
            <li><strong>Correlation:</strong> Adjacent bits are not independent</li>
            <li><strong>Insufficient mixing:</strong> Generator doesn't properly shuffle bits</li>
            <li><strong>Block structure:</strong> Generator produces output in structured blocks</li>
        </ul>

        <div class="warning-box">
            <strong>Note:</strong> When m=1, this test is equivalent to the Frequency (Monobit) Test. For larger m values, it detects more subtle pattern imbalances that simpler tests might miss.
        </div>

        <h2>Common Failure Patterns</h2>

        <h3>Example 1: Bit Correlation</h3>
        <div class="example">
Sequence tends to have 0 followed by 0, and 1 followed by 1
Result: Patterns 00 and 11 occur too frequently, 01 and 10 too rarely
Test: FAIL - Non-uniform m=2 pattern distribution
        </div>

        <h3>Example 2: Missing Patterns</h3>
        <div class="example">
Some 4-bit patterns never appear in sequence
Result: Those patterns have count 0, others have inflated counts
Test: FAIL - Severe pattern imbalance
        </div>

        <h2>Technical Details</h2>
        <div class="stat-grid">
            <div class="stat-card">
                <div class="stat-label">Test Type</div>
                <div class="stat-value">Uniformity</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Block Length m</div>
                <div class="stat-value">2-16 bits</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Min Bits</div>
                <div class="stat-value">Varies</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Significance</div>
                <div class="stat-value">α = 0.01</div>
            </div>
        </div>

        <h2>When to Use This Test</h2>
        <p>This test is valuable for:</p>
        <ul>
            <li><strong>Pattern Balance Verification:</strong> Ensuring all short patterns are equally likely</li>
            <li><strong>Correlation Detection:</strong> Finding dependencies between adjacent bits</li>
            <li><strong>Cryptographic RNGs:</strong> Verifying uniform pattern distribution</li>
            <li><strong>Complementing Other Tests:</strong> Provides multi-scale analysis</li>
        </ul>

        <h2>References</h2>
        <ul>
            <li>NIST Special Publication 800-22 Rev. 1a</li>
            <li>Section 2.11: Serial Test</li>
            <li><a href="https://csrc.nist.gov/publications/detail/sp/800-22/rev-1a/final" target="_blank">Full NIST Documentation</a></li>
        </ul>

        <a href="/" class="back-link">← Back to Validator</a>
    </div>
</body>
</html>
